<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Local Explorer</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="theme-color" content="#f8f7f2"> <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;900&family=Raleway:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
  <script src="key.js"></script>
</head>
<body>
  <header id="appHeader">
    <h1 id="appTitle">Local Explorer</h1>
    <button id="settingsBtn" type="button" aria-label="Open settings">‚öôÔ∏è</button>
  </header>
  <main class="appShell">
    <div id="locationDisplay">Determining your location‚Ä¶</div>
    <div id="manualInputContainer">
      <input type="text" id="manualInput" placeholder="Enter a location (e.g., city, zip, address)">
    </div>
    <div id="primaryActions">
      <button id="myListBtn">üìã My List</button>
      <button id="myPlanBtn">üó∫Ô∏è My Plan</button>
      <button id="compassBtn">üß≠ Compass</button>
    </div>
    <div id="weatherWidget" aria-live="polite">
      <div id="weatherHeader">
        <div id="weatherLabels">
          <span id="weatherTitle">Local Weather</span>
          <span id="weatherUpdated">Waiting for location...</span>
        </div>
        <button id="refreshWeatherBtn" type="button" aria-label="Refresh weather">‚Üª</button>
        <button id="toggleWeatherBtn" type="button" aria-label="Toggle weather details" class="weather-toggle-btn">‚öì</button>
      </div>
      <div id="weatherContent">
        <div id="weatherPrimary">
          <span id="weatherIcon">--</span>
          <span id="weatherTemp">--¬∞</span>
        </div>
        <div id="weatherDetails">
          <div id="weatherDescription">Provide location for forecast.</div>
          <div id="weatherMeta">
            <span id="weatherFeels">Feels like --¬∞</span>
            <span id="weatherWind">Wind -- mph</span>
          </div>
          <div id="weatherRange">High --¬∞ / Low --¬∞</div>
        </div>
      </div>
    </div>
    <div class="filters" id="filterGrid"></div>
    <div class="support-cta">
      <h3>Support the App</h3>
      <p>Enjoying these adventures? Help keep Local Explorer sailing.</p>
      <button id="donateBtn" type="button">‚ù§Ô∏è Donate</button>
    </div>
  </main>

  <div id="settingsPanel" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="close-btn" id="closeSettingsBtn" aria-label="Close settings">√ó</button>
      </div>
      <div class="setting-group">
        <label for="themeSelect">Theme</label>
        <select id="themeSelect">
          <option value="naval">Polished Sailor</option>
          <option value="sunset">Sunset Cruise</option>
          <option value="neon">Neon Harbor</option>
          <option value="arctic">Arctic Dawn</option>
          <option value="highseas">High Seas Neon</option>
          <option value="mojave">Mojave Drift</option>
          <option value="aurora">Aurora Mist</option>
          <option value="retro90">Retro Arcade 90s</option>
          <option value="groove70">Sunburst 70s</option>
          <option value="neverland">Promised Neverland</option>
          <option value="arcane">Arcane Depths</option>
          <option value="roblox">Roblox Blox</option>
          <option value="ramen">Ramen Bowl</option>
          <option value="dog">Good Dog</option>
        </select>
        <span class="setting-hint">Select a visual theme.</span>
      </div>
      <div class="setting-group">
        <label for="voiceSelect">Navigation Voice</label>
        <select id="voiceSelect"></select>
        <span class="setting-hint">Used for spoken turn-by-turn directions.</span>
      </div>
      <div class="setting-group">
        <label class="setting-toggle">
          <input type="checkbox" id="ambientModeToggle">
          <span>Ambient sound cues (Experimental)</span>
        </label>
        <span class="setting-hint">Adds subtle background sounds during navigation.</span>
      </div>
      <div class="setting-group">
        <button id="resetSettingsBtn" class="settings-secondary" type="button">Reset All Settings</button>
      </div>
    </div>
  </div>

  <div id="subMenuModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="subMenuTitle">Categories</h3>
        <button class="close-btn" id="closeSubMenu" aria-label="Close category menu">√ó</button>
      </div>
      <div class="subMenuList" id="subMenuList"></div>
    </div>
  </div>

  <div id="resultsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="resultsTitle">Results</h3>
        <button class="close-btn" id="closeResults" aria-label="Close results">√ó</button>
      </div>
      <div class="results-list" id="resultsList"></div>
      <button id="loadMoreResultsBtn" class="load-more-btn" type="button">Keep scanning</button>
    </div>
  </div>

  <div id="myListModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>My List</h3>
        <button class="close-btn" id="closeMyList" aria-label="Close my list">√ó</button>
      </div>
      <div class="results-list" id="myListContent"></div>
      <div class="empty-state" id="myListEmpty" style="display:none;">Your saved places appear here.</div>
    </div>
  </div>

  <div id="planModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>My Plan</h3>
        <button class="close-btn" id="closePlan" aria-label="Close plan">√ó</button>
      </div>
      <div id="planSummary"></div>
      <div class="results-list" id="planContent"></div>
      <div class="empty-state" id="planEmpty" style="display:none;">Add places to your plan to see them here.</div>
      <div class="modal-actions">
        <button id="sharePlanBtn" class="modal-primary-action">Share Plan</button>
        </div>
    </div>
  </div>

  <div id="donateModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Support Local Explorer</h3>
        <button class="close-btn" id="closeDonate" aria-label="Close donate modal">√ó</button>
      </div>
      <p>If you enjoy using Local Explorer, consider supporting development. Donations help keep this sailor‚Äôs app afloat!</p>
      <p class="venmo-info">Venmo: <strong>@Stephen-Mohamed-1</strong></p>
      <div class="modal-actions donate-actions">
        <button id="openVenmoBtn" class="modal-primary-action">Open Venmo</button>
        <button id="copyVenmoBtn" class="modal-secondary-action">Copy Handle</button>
      </div>
    </div>
  </div>

  <div id="detailsSheet">
    <div id="detailsMap">
      </div>
    <div id="detailsContent">
      <div class="sheet-handle" aria-hidden="true"></div>
      <button id="closeDetailsBtn" class="sheet-close" aria-label="Close details">√ó</button>
      <button id="activateStreetViewBtn" type="button" aria-label="Enable Street View Peek">üëÅÔ∏è Street View</button>
      <h3 id="detailsName"></h3>
      <div id="detailsRating"></div>
      <div id="detailsPhone"></div>
      <div id="detailsAddress"></div>
      <div id="detailsPrice"></div>
      <div id="detailsActions" class="action-grid">
        <div class="action-row primary">
          <button id="guideBtn" class="action-pill primary">üß≠ Guide Me</button>
          <button id="mapsBtn" class="action-pill outline">üìç Open in Maps</button>
        </div>
        <div class="action-row secondary">
          <button id="saveBtn" class="action-pill ghost">‚òÜ Save</button>
          <button id="planBtn" class="action-pill ghost">üó∫Ô∏è Add to Plan</button>
          <button id="shareBtn" class="action-pill ghost">üì§ Share</button>
          <button id="websiteBtn" class="action-pill ghost">üîó Website</button>
        </div>
      </div>
      <button class="accordion" id="reviewsAccordion" aria-expanded="false">Reviews</button>
      <div class="accordion-content" id="reviewsContent"></div>
      <button class="accordion" id="hoursAccordion" aria-expanded="false">Weekly Hours</button>
      <div class="accordion-content" id="hoursContent"></div>
    </div>
  </div>

  <div id="compassOverlay">
    <div class="compass-shell">
      <div class="compass-header">
        <div>
          <div class="compass-title">Bridge Compass</div>
          <div class="compass-subtitle" id="compassLocationLabel">Current Location</div>
        </div>
        <button id="closeCompassBtn" type="button" aria-label="Close compass">√ó</button>
      </div>
      <div class="compass-main">
        <div class="compass-face">
          <div id="compassDialContainer"> 
            <div id="compassDial"> 
              <div class="compass-marker north">N</div>
              <div class="compass-marker east">E</div>
              <div class="compass-marker south">S</div>
              <div class="compass-marker west">W</div>
               <div class="compass-marker intercardinal ne">NE</div>
               <div class="compass-marker intercardinal se">SE</div>
               <div class="compass-marker intercardinal sw">SW</div>
               <div class="compass-marker intercardinal nw">NW</div>
               <div class="compass-ticks"></div>
            </div>
            <div id="compassHeadingArrow"></div> 
          </div>
          <div class="compass-readout">
            <div class="readout-label">Heading</div>
            <div class="readout-value" id="compassHeadingValue">---¬∞</div>
            <div class="readout-label readout-destination-label">Destination</div>
            <div class="readout-value readout-destination-value" id="compassDestinationLabel">Set a place</div>
          </div>
        </div>
        <div class="compass-map-card" id="compassDirectionsCard">
          <div class="map-card-header">
            <span>Route Directions</span>
            <button id="toggleDirectionsPanel" type="button" aria-expanded="false">Show steps</button>
          </div>
          <div id="directionsPanel" aria-hidden="true">
            <div id="navigationButtons">
              <button id="readDirectionsBtn" disabled>üó£Ô∏è Read Steps</button>
              <button id="silenceBtn" disabled>üîá Silence</button>
            </div>
            <div id="nextStepCard">
              <div class="next-step-label">Next step</div>
              <div id="nextStepText">Waiting for route...</div>
              <div class="next-step-actions">
                <button id="nextStepBtn" type="button" disabled>Next</button>
                <button id="showAllStepsBtn" type="button">Show All</button>
              </div>
            </div>
            <div id="directionsList" class="collapsed"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="hiddenMap" aria-hidden="true"></div> 

  <script defer src="js/state.js"></script>
  <script defer src="js/ui.js"></script>
  <script defer src="js/api.js"></script>
  <script defer src="js/compass.js"></script>
  <script defer src="js/maps.js"></script>
  <script defer src="js/app.js"></script>
</body>
</html>
